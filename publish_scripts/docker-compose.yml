version: '3'

services:
  download_artifacts:
    build:
      context: ../Docker/download_artifacts
      dockerfile: Dockerfile
    environment:
     - GITHUB_TOKEN
     - WORKFLOW_RUN_NUMBER=465817659
    volumes:
      - ../artifacts:/extractedArtifacts
  upload_dockerhub:
    build:
      context: ../Docker/upload_dockerhub
      dockerfile: Dockerfile
    privileged: true
    environment:
     - WIKIBASE_DOCKER_PATH=/extractedArtifacts/wikibase.docker.tar.gz
     - QUERYSERVICE_BACKEND_DOCKER_PATH=/extractedArtifacts/wdqs.docker.tar.gz
     - QUERYSERVICE_FRONTEND_DOCKER_PATH=/extractedArtifacts/wdqs-ui.docker.tar.gz
    volumes:
      - ../artifacts:/extractedArtifacts