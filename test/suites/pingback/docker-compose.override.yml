version: '3.4'

services:

  wikibase:
    volumes:
      - ./suites/${SUITE_CONFIG_NAME}/LocalSettings.php:/var/www/html/LocalSettings.d/LocalSettings.${SUITE_CONFIG_NAME}.php
    environment: 
      - WIKIBASE_PINGBACK=true

  pingback_beacon:
    image: "node:lts-alpine"
    user: "node"
    working_dir: /home/node/app
    restart: always
    volumes:
      - ./suites/${SUITE_CONFIG_NAME}/beacon.cjs:/home/node/app/beacon.cjs
    command: "node beacon.cjs"
    ports:
      - "7171:80"
    depends_on:
      - wikibase
    networks:
      default:
        aliases:
         - mediawiki.svc
