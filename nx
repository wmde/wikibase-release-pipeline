#!/usr/bin/env bash

set -e

[ -f "local.env" ] || touch local.env

# If running inside a Docker container, execute nx directly
if [ -f /.dockerenv ]; then
  exec nx "${*}"
fi

# Otherwise, set up and run the Docker container
exec docker compose --progress quiet run --build --rm runner -c "nx ${*}"
