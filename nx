#!/usr/bin/env bash

set -e

[ -f "local.env" ] || touch local.env
# Make sure the docker network exists
docker network create wbs-dev > /dev/null 2>&1 || true

# If running inside a Docker container, execute nx directly
if [ -f /.dockerenv ]; then
  exec nx "${*}"
fi

# Otherwise, set up and run the Docker container
exec docker compose --progress quiet run --build --rm runner -c "nx ${*}"
